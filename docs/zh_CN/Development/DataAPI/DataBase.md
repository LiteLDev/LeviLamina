## 📦 数据库 API

数据库，一般用于插件可持久化地储存某些插件所生成和处理的数据。  
不同于配置文件，数据库一般没有可读性方面的要求，而对性能和稳定性有相当的考虑。  
LLSE提供统一数据库接口来完成这个任务。    
具体实现上，引擎提供了两种不同的数据库格式：键 - 值对格式的NoSQL数据库，和表格形式的SQL数据库。你可以按需使用。

<br>

### 🔑 键 - 值对 NoSQL数据库

键 - 值对数据库适用于储存键 - 值形式的数据，形如`name:apple` , `value:5`等等。  
底层使用 `leveldb` 实现

#### 创建 / 打开一个键值对数据库

在使用数据库之前，你先需要给出一个数据库路径，接口将打开/创建指定的数据库并返回一个数据库对象。  
一个leveldb数据库是由多个文件组成的，所以你需要传入一个文件夹的路径，数据库文件会被储存于这个文件夹当中。  
如果这个目录已含有一个数据库，将打开它，否则会新建一个。

[Js] `new KVDatabase(dir)`  
[Lua] `KVDatabase(dir)`

- 参数：
  - dir : `String`  
    数据库的储存目录路径，以BDS根目录为基准
- 返回值：打开 / 创建的数据库对象
- 返回值类型：`KVDatabase`
  - 如果返回值为`Null`，则代表创建 / 打开失败

当给出的目录不存在时，将尝试自动逐层创建对应的目录路径

成功打开数据库后，你可以使用下面的接口来进行相关的操作。  
对于一个数据库对象`db`，有以下这些函数：

<br>

#### 写入数据项

`db.set(name,data)`

- 参数：
  - name : `String`  
    数据项名字
  - data : `指定类型`  
    要写入的数据。允许使用的数据类型有：   
    `Integer` `Float` `String` `Boolean` `Array` `Object `  
    其中，`Array` 和 `Object` 内部仅能嵌套上面出现的这些元素
- 返回值：是否写入成功
- 返回值类型：`Boolean`

<br>

#### 读取数据项

`db.get(name)`

- 参数：
  - name : `String`  
    数据项名字
- 返回值：数据库中储存的这个项的数据
- 返回值类型：`任意类型`，以具体储存的数据类型为准
  - 如返回值为 `Null` 则表示数据不存在

<br>

#### 删除数据项

`db.delete(name)`

- 参数：
  - name : `String`  
    数据项名字
- 返回值：是否成功删除
- 返回值类型：`Boolean`

<br>

#### 获取所有数据项名字

`db.listKey()`

- 返回值：所有的数据项名字数组
- 返回值类型：`Array`

<br>

#### 关闭数据库

`db.close()`

- 返回值：是否成功关闭

数据库关闭之后，请勿继续使用！

<br>

------

### 📋 SQL数据库

SQL数据库适用于使用SQL语句处理大量的关系型数据。接口底层使用跨数据库操作框架实现，可对接绝大多数市面常用SQL数据库。

<br>